name: Deploy Landing Page

on:
  push:
    branches: [main, develop]

jobs:
  deploy-prod:
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Deploy to Production (scrappylabs.ai)
        uses: cloudflare/wrangler-action@v3
        with:
          apiToken: ${{ secrets.CF_PAGES_DEPLOY_TOKEN }}
          command: pages deploy . --project-name=scrappylabs-landing --branch=main
        env:
          CLOUDFLARE_API_TOKEN: ${{ secrets.CF_PAGES_DEPLOY_TOKEN }}

  deploy-preview:
    if: github.ref == 'refs/heads/develop'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Deploy Preview (develop branch)
        uses: cloudflare/wrangler-action@v3
        with:
          apiToken: ${{ secrets.CF_PAGES_DEPLOY_TOKEN }}
          command: pages deploy . --project-name=scrappylabs-landing --branch=develop
        env:
          CLOUDFLARE_API_TOKEN: ${{ secrets.CF_PAGES_DEPLOY_TOKEN }}
