<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multilingual TTS Demo â€” ScrappyLabs</title>
<meta name="description" content="Try ScrappyLabs multilingual text-to-speech. 28 languages, natural voices, instant generation.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
<!-- WCAG 2.2 AA: All text meets 4.5:1 contrast, UI components 3:1, no opacity for dimming -->
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --bg: #0a0a0f;
  --surface: #13131c;
  --surface-2: #1a1a28;
  --border: #4a4a6a;
  --border-interactive: #6e6e82;
  --text: #f0f0f5;
  --text-muted: #8a8aa0;
  --accent: #ff6b35;
  --accent-hover: #ff8555;
  --accent-glow: rgba(255, 107, 53, 0.15);
  --cyan: #00d4ff;
  --cyan-glow: rgba(0, 212, 255, 0.1);
  --green: #2ed573;
  --error: #ff4757;
  --font: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  --mono: 'JetBrains Mono', 'Fira Code', monospace;
}

html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

a { color: var(--accent); text-decoration: none; transition: color 0.2s; }
a:hover { color: var(--accent-hover); }

/* ---- HEADER ---- */
header {
  padding: 0 2rem;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: rgba(10, 10, 15, 0.85);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
}

.logo {
  font-size: 1.25rem;
  font-weight: 900;
  letter-spacing: -0.5px;
  background: linear-gradient(135deg, var(--accent), var(--cyan));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.back-link {
  color: var(--text-muted);
  font-size: 0.85rem;
  font-weight: 600;
  letter-spacing: 0.5px;
  text-transform: uppercase;
}
.back-link:hover { color: var(--text); }

/* ---- MAIN ---- */
main {
  flex: 1;
  max-width: 720px;
  width: 100%;
  margin: 0 auto;
  padding: 3rem 2rem 4rem;
}

h1 {
  font-size: clamp(1.8rem, 5vw, 2.5rem);
  font-weight: 900;
  letter-spacing: -1px;
  margin-bottom: 0.5rem;
  line-height: 1.1;
}

h1 .gradient {
  background: linear-gradient(135deg, var(--accent) 0%, var(--cyan) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.subtitle {
  color: var(--text-muted);
  font-size: 1rem;
  margin-bottom: 2.5rem;
}

.lang-count {
  font-family: var(--mono);
  color: var(--cyan);
  font-weight: 600;
}

/* ---- FORM ---- */
.form-group {
  margin-bottom: 1.5rem;
}

label {
  display: block;
  font-size: 0.8rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
  margin-bottom: 0.5rem;
}

select, textarea {
  width: 100%;
  background: var(--surface);
  color: var(--text);
  border: 1px solid var(--border-interactive);
  border-radius: 10px;
  padding: 0.85rem 1rem;
  font-family: var(--font);
  font-size: 0.95rem;
  transition: border-color 0.2s, box-shadow 0.2s;
  appearance: none;
}

select {
  cursor: pointer;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8'%3E%3Cpath d='M1 1l5 5 5-5' fill='none' stroke='%238a8aa0' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 1rem center;
  padding-right: 2.5rem;
}

textarea {
  resize: vertical;
  min-height: 120px;
  line-height: 1.6;
}

select:focus, textarea:focus {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
  border-color: var(--accent);
}

select:hover, textarea:hover {
  border-color: var(--text-muted);
}

/* optgroup styling */
select optgroup {
  font-weight: 700;
  color: var(--text-muted);
}

select option {
  background: var(--surface);
  color: var(--text);
  padding: 0.5rem;
}

.char-count {
  text-align: right;
  font-family: var(--mono);
  font-size: 0.75rem;
  color: var(--text-muted);
  margin-top: 0.35rem;
}

.char-count.over {
  color: var(--error);
  font-weight: 600;
}

/* ---- TOGGLE ---- */
.toggle-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1.5rem;
  padding: 0.85rem 1rem;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
}

.toggle-row.hidden { display: none; }

.toggle-label {
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--text);
}

.toggle-hint {
  font-size: 0.75rem;
  color: var(--text-muted);
  margin-top: 0.2rem;
}

.toggle {
  position: relative;
  width: 48px;
  height: 26px;
  flex-shrink: 0;
}

.toggle input {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-slider {
  position: absolute;
  cursor: pointer;
  inset: 0;
  background: var(--surface-2);
  border: 1px solid var(--border-interactive);
  border-radius: 26px;
  transition: all 0.25s;
}

.toggle-slider::before {
  content: '';
  position: absolute;
  width: 20px;
  height: 20px;
  left: 2px;
  bottom: 2px;
  background: var(--text-muted);
  border-radius: 50%;
  transition: all 0.25s;
}

.toggle input:checked + .toggle-slider {
  background: var(--cyan-glow);
  border-color: var(--cyan);
}

.toggle input:checked + .toggle-slider::before {
  transform: translateX(22px);
  background: var(--cyan);
}

.toggle input:focus-visible + .toggle-slider {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

/* ---- GENERATE BUTTON ---- */
.generate-btn {
  width: 100%;
  padding: 1rem;
  border: none;
  border-radius: 12px;
  background: var(--accent);
  color: var(--bg);
  font-family: var(--font);
  font-size: 1rem;
  font-weight: 800;
  letter-spacing: 0.5px;
  cursor: pointer;
  transition: all 0.25s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.generate-btn:hover:not(:disabled) {
  background: var(--accent-hover);
  transform: translateY(-1px);
  box-shadow: 0 8px 30px var(--accent-glow);
}

.generate-btn:disabled {
  cursor: not-allowed;
  background: var(--surface-2);
  color: var(--text-muted);
}

.generate-btn:focus-visible {
  outline: 2px solid var(--cyan);
  outline-offset: 2px;
}

.spinner {
  display: none;
  width: 18px;
  height: 18px;
  border: 2px solid transparent;
  border-top-color: currentColor;
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
}

.generate-btn.loading .spinner { display: block; }
.generate-btn.loading .btn-text { display: none; }

@keyframes spin { to { transform: rotate(360deg); } }

/* ---- RESULT ---- */
.result {
  margin-top: 2rem;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 1.5rem;
  display: none;
}

.result.visible { display: block; }

.result-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1rem;
}

.result-label {
  font-size: 0.75rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
}

.result-provider {
  font-family: var(--mono);
  font-size: 0.7rem;
  color: var(--cyan);
  background: rgba(0, 212, 255, 0.1);
  padding: 0.2rem 0.6rem;
  border-radius: 4px;
}

audio {
  width: 100%;
  border-radius: 8px;
  outline: none;
}

audio:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

/* ---- ERROR ---- */
.error-msg {
  margin-top: 1rem;
  background: rgba(255, 71, 87, 0.1);
  border: 1px solid rgba(255, 71, 87, 0.3);
  border-radius: 10px;
  padding: 1rem;
  color: var(--error);
  font-size: 0.9rem;
  display: none;
}

.error-msg.visible { display: block; }

/* ---- FOOTER ---- */
footer {
  text-align: center;
  padding: 2rem;
  border-top: 1px solid var(--border);
  color: var(--text-muted);
  font-size: 0.8rem;
}

/* ---- RESPONSIVE ---- */
@media (max-width: 600px) {
  header { padding: 0 1rem; }
  main { padding: 2rem 1rem 3rem; }
}
</style>
</head>
<body>

<header>
  <a href="/" class="logo" aria-label="ScrappyLabs home">ScrappyLabs</a>
  <a href="/" class="back-link" aria-label="Back to home">Home</a>
</header>

<main>
  <h1>Multilingual <span class="gradient">Voice Demo</span></h1>
  <p class="subtitle">
    Type in any of <span class="lang-count">28 languages</span> and hear it spoken naturally.
  </p>

  <div class="form-group">
    <label for="lang-select">Language</label>
    <select id="lang-select" aria-label="Select language">
      <optgroup label="Popular">
        <option value="en" selected>English</option>
        <option value="es">Spanish</option>
        <option value="fr">French</option>
        <option value="de">German</option>
        <option value="pt">Portuguese</option>
        <option value="it">Italian</option>
        <option value="zh">Chinese</option>
        <option value="ja">Japanese</option>
        <option value="ko">Korean</option>
      </optgroup>
      <optgroup label="European">
        <option value="nl">Dutch</option>
        <option value="pl">Polish</option>
        <option value="ru">Russian</option>
        <option value="uk">Ukrainian</option>
        <option value="cs">Czech</option>
        <option value="ro">Romanian</option>
        <option value="hu">Hungarian</option>
        <option value="bg">Bulgarian</option>
        <option value="hr">Croatian</option>
        <option value="sk">Slovak</option>
        <option value="sl">Slovenian</option>
      </optgroup>
      <optgroup label="Nordic">
        <option value="da">Danish</option>
        <option value="fi">Finnish</option>
        <option value="sv">Swedish</option>
        <option value="no">Norwegian</option>
      </optgroup>
      <optgroup label="Other">
        <option value="el">Greek</option>
        <option value="tr">Turkish</option>
        <option value="ca">Catalan</option>
        <option value="vi">Vietnamese</option>
      </optgroup>
    </select>
  </div>

  <div class="toggle-row" id="toggle-row">
    <div>
      <div class="toggle-label">Use Multilingual Engine</div>
      <div class="toggle-hint">Optimized for European languages</div>
    </div>
    <label class="toggle">
      <input type="checkbox" id="multilingual-toggle" aria-label="Use multilingual engine">
      <span class="toggle-slider"></span>
    </label>
  </div>

  <div class="form-group">
    <label for="text-input">Text</label>
    <textarea id="text-input" placeholder="Type or paste text to speak..." maxlength="500" aria-label="Text to speak">Welcome to ScrappyLabs. We create unique voices for unique creators.</textarea>
    <div class="char-count" aria-live="polite"><span id="char-num">65</span> / 500</div>
  </div>

  <button class="generate-btn" id="generate-btn" aria-label="Generate speech">
    <span class="btn-text">Generate Speech</span>
    <span class="spinner" aria-hidden="true"></span>
  </button>

  <div class="error-msg" id="error-msg" role="alert"></div>

  <div class="result" id="result">
    <div class="result-header">
      <span class="result-label">Generated Audio</span>
    </div>
    <audio id="audio-player" controls></audio>
  </div>

</main>

<footer>
  <p>ScrappyLabs &mdash; <a href="https://beta.scrappylabs.ai">Full TTS Studio</a> &bull; <a href="/">Home</a></p>
</footer>

<script>
const API = 'https://api.scrappylabs.ai';
const langSelect = document.getElementById('lang-select');
const textInput = document.getElementById('text-input');
const charNum = document.getElementById('char-num');
const charCount = document.querySelector('.char-count');
const genBtn = document.getElementById('generate-btn');
const result = document.getElementById('result');
const audioPlayer = document.getElementById('audio-player');
const errorMsg = document.getElementById('error-msg');
const toggleRow = document.getElementById('toggle-row');
const multilingualToggle = document.getElementById('multilingual-toggle');

// Languages supported by the multilingual engine (KugelAudio)
const multilingualLangs = new Set([
  'en', 'de', 'fr', 'es', 'it', 'pt', 'nl', 'pl', 'ru', 'uk',
  'cs', 'ro', 'hu', 'bg', 'hr', 'sk', 'sl', 'da', 'fi', 'sv',
  'no', 'el', 'tr', 'ca'
]);

// Sample text per language
const samples = {
  en: "Welcome to ScrappyLabs. We create unique voices for unique creators. Whether you're building a bot, an app, or something entirely new \u2014 we've got a voice for you.",
  es: "Bienvenido a ScrappyLabs. Creamos voces \u00fanicas para creadores \u00fanicos. Ya sea que est\u00e9s construyendo un bot, una aplicaci\u00f3n o algo completamente nuevo \u2014 tenemos una voz para ti.",
  fr: "Bienvenue sur ScrappyLabs. Nous cr\u00e9ons des voix uniques pour des cr\u00e9ateurs uniques. Que vous construisiez un bot, une application ou quelque chose d'enti\u00e8rement nouveau \u2014 nous avons une voix pour vous.",
  de: "Willkommen bei ScrappyLabs. Wir schaffen einzigartige Stimmen f\u00fcr einzigartige Creator. Ob du einen Bot, eine App oder etwas v\u00f6llig Neues entwickelst \u2014 wir haben eine Stimme f\u00fcr dich.",
  pt: "Bem-vindo ao ScrappyLabs. Criamos vozes \u00fanicas para criadores \u00fanicos. Quer voc\u00ea esteja construindo um bot, um aplicativo ou algo completamente novo \u2014 temos uma voz para voc\u00ea.",
  it: "Benvenuto su ScrappyLabs. Creiamo voci uniche per creator unici. Che tu stia costruendo un bot, un'app o qualcosa di completamente nuovo \u2014 abbiamo una voce per te.",
  zh: "\u6b22\u8fce\u6765\u5230ScrappyLabs\u3002\u6211\u4eec\u4e3a\u72ec\u7279\u7684\u521b\u4f5c\u8005\u521b\u9020\u72ec\u7279\u7684\u58f0\u97f3\u3002\u65e0\u8bba\u4f60\u5728\u6784\u5efa\u673a\u5668\u4eba\u3001\u5e94\u7528\u7a0b\u5e8f\u8fd8\u662f\u5168\u65b0\u7684\u4e1c\u897f\u2014\u2014\u6211\u4eec\u90fd\u6709\u9002\u5408\u4f60\u7684\u58f0\u97f3\u3002",
  ja: "ScrappyLabs\u3078\u3088\u3046\u3053\u305d\u3002\u30e6\u30cb\u30fc\u30af\u306a\u30af\u30ea\u30a8\u30a4\u30bf\u30fc\u306e\u305f\u3081\u306e\u30e6\u30cb\u30fc\u30af\u306a\u58f0\u3092\u5275\u9020\u3057\u307e\u3059\u3002\u30dc\u30c3\u30c8\u3001\u30a2\u30d7\u30ea\u3001\u307e\u305f\u306f\u307e\u3063\u305f\u304f\u65b0\u3057\u3044\u3082\u306e\u3092\u4f5c\u3063\u3066\u3044\u308b\u65b9\u3078\u2014\u2014\u3042\u306a\u305f\u306b\u3074\u3063\u305f\u308a\u306e\u58f0\u304c\u3042\u308a\u307e\u3059\u3002",
  ko: "ScrappyLabs\uc5d0 \uc624\uc2e0 \uac83\uc744 \ud658\uc601\ud569\ub2c8\ub2e4. \ub3c5\ud2b9\ud55c \ud06c\ub9ac\uc5d0\uc774\ud130\ub97c \uc704\ud55c \ub3c5\ud2b9\ud55c \ubaa9\uc18c\ub9ac\ub97c \ub9cc\ub4ed\ub2c8\ub2e4. \ubd07, \uc571, \ub610\ub294 \uc644\uc804\ud788 \uc0c8\ub85c\uc6b4 \ubb34\uc5b8\uac00\ub97c \ub9cc\ub4e4\uace0 \uc788\ub2e4\uba74 \u2014 \ub2f9\uc2e0\uc744 \uc704\ud55c \ubaa9\uc18c\ub9ac\uac00 \uc788\uc2b5\ub2c8\ub2e4.",
  nl: "Welkom bij ScrappyLabs. Wij cre\u00ebren unieke stemmen voor unieke creators. Of je nu een bot, een app of iets heel nieuws bouwt \u2014 we hebben een stem voor jou.",
  pl: "Witaj w ScrappyLabs. Tworzymy unikalne g\u0142osy dla unikalnych tw\u00f3rc\u00f3w. Niezale\u017cnie od tego, czy budujesz bota, aplikacj\u0119 czy co\u015b zupe\u0142nie nowego \u2014 mamy g\u0142os dla ciebie.",
  ru: "\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 ScrappyLabs. \u041c\u044b \u0441\u043e\u0437\u0434\u0430\u0451\u043c \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0433\u043e\u043b\u043e\u0441\u0430 \u0434\u043b\u044f \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u0430\u0432\u0442\u043e\u0440\u043e\u0432. \u0421\u043e\u0437\u0434\u0430\u0451\u0442\u0435 \u043b\u0438 \u0432\u044b \u0431\u043e\u0442\u0430, \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0438\u043b\u0438 \u0447\u0442\u043e-\u0442\u043e \u0441\u043e\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u043e \u043d\u043e\u0432\u043e\u0435 \u2014 \u0443 \u043d\u0430\u0441 \u0435\u0441\u0442\u044c \u0433\u043e\u043b\u043e\u0441 \u0434\u043b\u044f \u0432\u0430\u0441.",
  uk: "\u041b\u0430\u0441\u043a\u0430\u0432\u043e \u043f\u0440\u043e\u0441\u0438\u043c\u043e \u0434\u043e ScrappyLabs. \u041c\u0438 \u0441\u0442\u0432\u043e\u0440\u044e\u0454\u043c\u043e \u0443\u043d\u0456\u043a\u0430\u043b\u044c\u043d\u0456 \u0433\u043e\u043b\u043e\u0441\u0438 \u0434\u043b\u044f \u0443\u043d\u0456\u043a\u0430\u043b\u044c\u043d\u0438\u0445 \u0442\u0432\u043e\u0440\u0446\u0456\u0432. \u0427\u0438 \u0432\u0438 \u0441\u0442\u0432\u043e\u0440\u044e\u0454\u0442\u0435 \u0431\u043e\u0442\u0430, \u0434\u043e\u0434\u0430\u0442\u043e\u043a \u0447\u0438 \u0449\u043e\u0441\u044c \u0437\u043e\u0432\u0441\u0456\u043c \u043d\u043e\u0432\u0435 \u2014 \u043c\u0438 \u043c\u0430\u0454\u043c\u043e \u0433\u043e\u043b\u043e\u0441 \u0434\u043b\u044f \u0432\u0430\u0441.",
  cs: "V\u00edtejte v ScrappyLabs. Vytv\u00e1\u0159\u00edme unik\u00e1tn\u00ed hlasy pro unik\u00e1tn\u00ed tv\u016frce. A\u0165 u\u017e stav\u00edte bota, aplikaci nebo n\u011bco zcela nov\u00e9ho \u2014 m\u00e1me hlas pro v\u00e1s.",
  ro: "Bine a\u021bi venit la ScrappyLabs. Cre\u0103m voci unice pentru creatori unici. Fie c\u0103 construi\u021bi un bot, o aplica\u021bie sau ceva complet nou \u2014 avem o voce pentru tine.",
  hu: "\u00dcdv\u00f6z\u00f6lj\u00fck a ScrappyLabs-n\u00e1l. Egyedi hangokat hozunk l\u00e9tre egyedi alkot\u00f3k sz\u00e1m\u00e1ra. Ak\u00e1r botot, alkalmaz\u00e1st vagy valami eg\u00e9szen \u00fajat \u00e9p\u00edtesz \u2014 van egy hangunk sz\u00e1modra.",
  bg: "\u0414\u043e\u0431\u0440\u0435 \u0434\u043e\u0448\u043b\u0438 \u0432 ScrappyLabs. \u0421\u044a\u0437\u0434\u0430\u0432\u0430\u043c\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u043d\u0438 \u0433\u043b\u0430\u0441\u043e\u0432\u0435 \u0437\u0430 \u0443\u043d\u0438\u043a\u0430\u043b\u043d\u0438 \u0442\u0432\u043e\u0440\u0446\u0438. \u041d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e \u0434\u0430\u043b\u0438 \u0441\u044a\u0437\u0434\u0430\u0432\u0430\u0442\u0435 \u0431\u043e\u0442, \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0438\u043b\u0438 \u043d\u0435\u0449\u043e \u043d\u0430\u043f\u044a\u043b\u043d\u043e \u043d\u043e\u0432\u043e \u2014 \u0438\u043c\u0430\u043c\u0435 \u0433\u043b\u0430\u0441 \u0437\u0430 \u0432\u0430\u0441.",
  hr: "Dobrodo\u0161li u ScrappyLabs. Stvaramo jedinstvene glasove za jedinstvene kreatore. Bilo da gradite bota, aplikaciju ili ne\u0161to potpuno novo \u2014 imamo glas za vas.",
  sk: "Vitajte v ScrappyLabs. Vytv\u00e1rame unik\u00e1tne hlasy pre unik\u00e1tnych tvorcov. \u010ci u\u017e stav\u00e1te bota, aplik\u00e1ciu alebo nie\u010do \u00faplne nov\u00e9 \u2014 m\u00e1me hlas pre v\u00e1s.",
  sl: "Dobrodo\u0161li v ScrappyLabs. Ustvarjamo edinstvene glasove za edinstvene ustvarjalce. Najsi gradite bota, aplikacijo ali nekaj popolnoma novega \u2014 imamo glas za vas.",
  da: "Velkommen til ScrappyLabs. Vi skaber unikke stemmer til unikke skabere. Uanset om du bygger en bot, en app eller noget helt nyt \u2014 har vi en stemme til dig.",
  fi: "Tervetuloa ScrappyLabsiin. Luomme ainutlaatuisia \u00e4\u00e4ni\u00e4 ainutlaatuisille luojille. Rakennatpa bottia, sovellusta tai jotain aivan uutta \u2014 meill\u00e4 on \u00e4\u00e4ni sinulle.",
  sv: "V\u00e4lkommen till ScrappyLabs. Vi skapar unika r\u00f6ster f\u00f6r unika creators. Oavsett om du bygger en bot, en app eller n\u00e5got helt nytt \u2014 vi har en r\u00f6st f\u00f6r dig.",
  no: "Velkommen til ScrappyLabs. Vi skaper unike stemmer for unike skapere. Enten du bygger en bot, en app eller noe helt nytt \u2014 vi har en stemme for deg.",
  el: "\u039a\u03b1\u03bb\u03ce\u03c2 \u03ae\u03c1\u03b8\u03b1\u03c4\u03b5 \u03c3\u03c4\u03bf ScrappyLabs. \u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03bf\u03cd\u03bc\u03b5 \u03bc\u03bf\u03bd\u03b1\u03b4\u03b9\u03ba\u03ad\u03c2 \u03c6\u03c9\u03bd\u03ad\u03c2 \u03b3\u03b9\u03b1 \u03bc\u03bf\u03bd\u03b1\u03b4\u03b9\u03ba\u03bf\u03cd\u03c2 \u03b4\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03bf\u03cd\u03c2. \u0395\u03af\u03c4\u03b5 \u03c7\u03c4\u03af\u03b6\u03b5\u03c4\u03b5 \u03ad\u03bd\u03b1 bot, \u03bc\u03b9\u03b1 \u03b5\u03c6\u03b1\u03c1\u03bc\u03bf\u03b3\u03ae \u03ae \u03ba\u03ac\u03c4\u03b9 \u03b5\u03bd\u03c4\u03b5\u03bb\u03ce\u03c2 \u03bd\u03ad\u03bf \u2014 \u03ad\u03c7\u03bf\u03c5\u03bc\u03b5 \u03bc\u03b9\u03b1 \u03c6\u03c9\u03bd\u03ae \u03b3\u03b9\u03b1 \u03c3\u03b1\u03c2.",
  tr: "ScrappyLabs'e ho\u015f geldiniz. E\u015fsiz yarat\u0131c\u0131lar i\u00e7in e\u015fsiz sesler olu\u015fturuyoruz. \u0130ster bir bot, ister bir uygulama veya tamamen yeni bir \u015fey in\u015fa ediyor olun \u2014 senin i\u00e7in bir sesimiz var.",
  ca: "Benvingut a ScrappyLabs. Creem veus \u00faniques per a creadors \u00fanics. Tant si est\u00e0s construint un bot, una aplicaci\u00f3 o alguna cosa completament nova \u2014 tenim una veu per a tu.",
  vi: "Ch\u00e0o m\u1eebng b\u1ea1n \u0111\u1ebfn v\u1edbi ScrappyLabs. Ch\u00fang t\u00f4i t\u1ea1o ra nh\u1eefng gi\u1ecdng n\u00f3i \u0111\u1ed9c \u0111\u00e1o cho nh\u1eefng nh\u00e0 s\u00e1ng t\u1ea1o \u0111\u1ed9c \u0111\u00e1o. D\u00f9 b\u1ea1n \u0111ang x\u00e2y d\u1ef1ng bot, \u1ee9ng d\u1ee5ng hay \u0111i\u1ec1u g\u00ec ho\u00e0n to\u00e0n m\u1edbi \u2014 ch\u00fang t\u00f4i c\u00f3 gi\u1ecdng n\u00f3i d\u00e0nh cho b\u1ea1n.",
};

function updateText() {
  const lang = langSelect.value;
  if (samples[lang]) {
    textInput.value = samples[lang];
    const len = textInput.value.length;
    charNum.textContent = len;
    charCount.classList.toggle('over', len > 500);
    genBtn.disabled = len === 0 || len > 500;
  }
  // Show toggle only for multilingual-supported languages
  toggleRow.classList.toggle('hidden', !multilingualLangs.has(lang));
}

// Character counter
textInput.addEventListener('input', () => {
  const len = textInput.value.length;
  charNum.textContent = len;
  charCount.classList.toggle('over', len > 500);
  genBtn.disabled = len === 0 || len > 500;
});

// Language change auto-populates sample text
langSelect.addEventListener('change', updateText);

// Initial state
updateText();

// Generate
genBtn.addEventListener('click', async () => {
  const text = textInput.value.trim();
  if (!text) return;

  genBtn.classList.add('loading');
  genBtn.disabled = true;
  result.classList.remove('visible');
  errorMsg.classList.remove('visible');

  try {
    const payload = {
      text: text,
      voice: 'narrator',
      language: langSelect.value,
    };
    // Force kugelaudio when toggle is on
    if (multilingualToggle.checked && multilingualLangs.has(langSelect.value)) {
      payload.provider = 'kugelaudio';
    }
    const resp = await fetch(API + '/api/speak', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload),
    });

    if (!resp.ok) {
      const errData = await resp.json().catch(() => ({}));
      throw new Error(errData.detail || `Generation failed (${resp.status})`);
    }

    const blob = await resp.blob();
    const url = URL.createObjectURL(blob);

    if (audioPlayer.src && audioPlayer.src.startsWith('blob:')) {
      URL.revokeObjectURL(audioPlayer.src);
    }

    audioPlayer.src = url;
    result.classList.add('visible');
    audioPlayer.play();

  } catch (err) {
    errorMsg.textContent = err.message || 'Something went wrong. Please try again.';
    errorMsg.classList.add('visible');
  } finally {
    genBtn.classList.remove('loading');
    genBtn.disabled = textInput.value.length === 0 || textInput.value.length > 500;
  }
});

// Keyboard: Enter to generate (when textarea not focused)
document.addEventListener('keydown', (e) => {
  if (e.key === 'Enter' && !e.shiftKey && document.activeElement !== textInput) {
    e.preventDefault();
    genBtn.click();
  }
});
</script>
</body>
</html>
